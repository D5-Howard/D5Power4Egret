function trace(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];for(var h="",i=0,o=t.length;o>i;i++)h+=t[i]+" ";console.log(h)}var d5power;!function(t){var e=function(){function t(){this._link=0,this._waiterList=new Array}var e=__define,h=t;return p=h.prototype,t.setupUnknow=function(e){null!=e&&(e._offsetX=-(e._bitmapWidth>>1),e._offsetY=-e._bitmapHeight,t._unknow=e)},t.getInstance=function(e,h){var i;return null!=t._pool_inuse[e]?(i=t._pool_inuse[e],i._link++,1==i._link&&i.setup(e)):(i=t._pool_jale.length>0?t._pool_jale.pop():new t,i._link++,i.setup(e)),null==i._sheet?i.addWaiter(h):h.onSpriteSheepReady(i),i.loadID=h.loadID,i},t.back2pool=function(e){t._pool_inuse[e._name]=null,t._pool_jale.length<t.MAX_IN_JALE&&-1==t._pool_jale.indexOf(e)&&t._pool_jale.push(e)},e(p,"name",function(){return this._name}),e(p,"renderTime",function(){return this._renderTime}),e(p,"totalFrame",function(){return this._totalFrame}),e(p,"totalDirection",function(){return this._totalDirection}),e(p,"shadowX",function(){return this._shadowX}),e(p,"shadowY",function(){return this._shadowY}),e(p,"gX",function(){return this._gX}),e(p,"gY",function(){return this._gY}),e(p,"uvList",function(){return this._uvList}),e(p,"frameWidth",function(){return this._frameW}),e(p,"frameHeight",function(){return this._frameH}),p.addWaiter=function(t){-1==this._waiterList.indexOf(t)&&this._waiterList.push(t)},p.setup=function(e){".png"==e.substr(-4,4)?this._name=e.substr(0,e.length-4):(this._name=e,e+=".png"),t._pool_inuse[this._name]=this,RES.getResByUrl(e,this.onTextureComplete,this)},p.unlink=function(){this._link--,this._link<0&&(this._link=0),0==this._link&&(this._sheet=null,this._waiterList=[],t._pool_inuse[this._name]=null,t.back2pool(this))},p.onTextureComplete=function(t){0!=this._link&&(this._sheet=new egret.SpriteSheet(t),RES.getResByUrl(this._name+".json",this.onDataComplate,this))},p.getTexture=function(e,h){return null==this._sheet?t._unknow:this._sheet.getTexture("frame"+e+"_"+h)},p.onDataComplate=function(t){if(0==this._link)return void(this._sheet=null);switch(this._totalFrame=parseInt(t.Frame),this._renderTime=parseInt(t.Time),this._shadowX=parseInt(t.shadowX),this._shadowY=parseInt(t.shadowY),this._shadowY>=this._shadowX&&(this._shadowY=.5*t.shadowX),this._totalDirection=parseInt(t.Direction),parseInt(t.Direction)){case 1:this._totalDirection=1;break;case 5:this._totalDirection=8;break;case 3:this._totalDirection=4}this._gX=parseInt(t.X),this._gY=parseInt(t.Y),this._frameW=parseInt(t.FrameWidth),this._frameH=parseInt(t.FrameHeight),this._uvList=t.uv?t.uv:null;var e,h;if(t.uv)for(h=0;h<this._totalDirection;h++)for(e=0;e<this._totalFrame;e++){var i=5>h?h:8-h,o=t.uv[i*this._totalFrame+e];null==o?console.log("[D5SpriteSheepINIT] can not find uv config line:",h,",frame:",e,"==========================="):(o.offY==-o.height&&(o.offY+=.01),this._sheet.createTexture("frame"+h+"_"+e,e*t.FrameWidth+o.x,h*t.FrameHeight+o.y,o.width,o.height,0,0))}else for(h=0;h<this._totalDirection;h++)for(e=0;e<this._totalFrame;e++)this._sheet.createTexture("frame"+h+"_"+e,e*t.FrameWidth,h*t.FrameHeight,t.FrameWidth,t.FrameHeight,0,0);for(;this._waiterList.length>0;){var a=this._waiterList.pop();a.loadID==this.loadID&&a.onSpriteSheepReady(this)}},t.MAX_IN_JALE=200,t._pool_inuse={},t._pool_jale=new Array,t}();t.D5SpriteSheet=e,egret.registerClass(e,"d5power.D5SpriteSheet",["d5power.IDisplayer"])}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function t(){this.offX=0,this.offY=0,this.width=0,this.height=0}var e=(__define,t);return p=e.prototype,p.format=function(t){this.offX=parseInt(t.offX),this.offY=parseInt(t.offY),this.width=parseInt(t.width),this.height=parseInt(t.height),this.u=t.u,this.v=t.v,this.w=t.w,this.h=t.h,this.x=t.x,this.y=t.y},t}();t.UVData=e,egret.registerClass(e,"d5power.UVData")}(d5power||(d5power={}));var d5power;!function(t){var e=function(){function e(){this._resList=[]}var h=(__define,e);return p=h.prototype,e.setupResLib=function(h,i){e._resource=new egret.SpriteSheet(h);var o,a,s,n,r;for(var f in i){trace(f,i[f]),o=i[f];var u=new e;switch(r=[],o.type){case"D5MirrorBox":s=o.cut[0],a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=s.x,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y,a.width=o.w-s.x,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x,a.offY=o.y+s.y,a.width=s.x,a.height=o.h-s.y,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y+s.y,a.width=o.w-s.x,a.height=o.h-s.y,r.push(a),u.setupResource(f,r);break;case"D5Window":s=o.cut[0],n=o.cut[1],a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=s.x,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y,a.width=n.x-s.x,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x+n.x,a.offY=o.y,a.width=o.w-n.x,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x,a.offY=o.y+s.y,a.width=s.x,a.height=n.y-s.y,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y+s.y,a.width=n.x-s.x,a.height=n.y-s.y,r.push(a),a=new t.UVData,a.offX=o.x+n.x,a.offY=o.y+s.y,a.width=o.w-n.x,a.height=n.y-s.y,r.push(a),a=new t.UVData,a.offX=o.x,a.offY=o.y+n.y,a.width=s.x,a.height=o.h-n.y,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y+n.y,a.width=n.x-s.x,a.height=o.h-n.y,r.push(a),a=new t.UVData,a.offX=o.x+n.x,a.offY=o.y+n.y,a.width=o.w-n.x,a.height=o.h-n.y,r.push(a),u.setupResource(f,r);break;case"D5Button":s=o.cut[1],0==s.x?(a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w/4,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w/2,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w-o.w/4,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),u.buttonType=4):(a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=o.w/2,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w/2,a.offY=o.y,a.width=o.w/2,a.height=o.h,r.push(a),u.buttonType=2),u.setupResource(f,r);break;case"D5MirrorLoop":s=o.cut[0],0==s.y?(a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=s.x,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y,a.width=o.w-s.x,a.height=o.h,r.push(a),e._typeLoop=0):(a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=o.w,a.height=s.y,r.push(a),a=new t.UVData,a.offX=o.x,a.offY=o.y+s.y,a.width=o.w,a.height=o.h-s.y,r.push(a),e._typeLoop=1),u.setupResource(f,r);break;case"D5Bitmap":a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=o.w,a.height=o.h,r.push(a),u.setupResource(f,r);break;case"D5RadioBtn":a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w/4,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w/2,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),a=new t.UVData,a.offX=o.x+o.w-o.w/4,a.offY=o.y,a.width=o.w/4,a.height=o.h,r.push(a),u.setupResource(f,r);break;case"D5SliderButton":s=o.cut[0],a=new t.UVData,a.offX=o.x,a.offY=o.y,a.width=s.x,a.height=o.h/2,r.push(a),a=new t.UVData,a.offX=o.x+s.x,a.offY=o.y,a.width=o.w-s.x,a.height=o.h/2,r.push(a),a=new t.UVData,a.offX=o.x,a.offY=o.y+o.h/2,a.width=o.w/4,a.height=o.h/2,r.push(a),a=new t.UVData,a.offX=o.x+o.w/4,a.offY=o.y+o.h/2,a.width=o.w/4,a.height=o.h/2,r.push(a),a=new t.UVData,a.offX=o.x+o.w/2,a.offY=o.y+o.h/2,a.width=o.w/4,a.height=o.h/2,r.push(a),a=new t.UVData,a.offX=o.x+o.w-o.w/4,a.offY=o.y+o.h/2,a.width=o.w/4,a.height=o.h/2,r.push(a),u.setupResource(f,r);break;case"D5BitmapNumber":for(var w=0;10>w;w++)a=new t.UVData,a.offX=o.x+w*o.w/10,a.offY=o.y,a.width=o.w/10,a.height=o.h,r.push(a);u.setupResource(f,r)}e._resourceLib[f]=u}},e.getData=function(t){return e._resourceLib[t]},p.setupResource=function(t,h){this._name=t;for(var i=0,o=h.length;o>i;i++)e._resource.createTexture(t+i,h[i].offX,h[i].offY,h[i].width,h[i].height)},p.getResource=function(t){return e._resource.getTexture(this._name+t)},e._resourceLib={},e._typeLoop=0,e}();t.D5UIResourceData=e,egret.registerClass(e,"d5power.D5UIResourceData")}(d5power||(d5power={}));